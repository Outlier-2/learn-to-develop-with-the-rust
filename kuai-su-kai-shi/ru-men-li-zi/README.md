---
description: ä»¥Rustå®˜æ–¹æŒ‡å¯¼ä¸ºä¾‹å­
---

# ğŸš€ å…¥é—¨ä¾‹å­

## Hello World (åœ¨æ­¤ä¸è¿‡å¤šä»‹ç»)

{% embed url="https://doc.rust-lang.org/book/ch01-02-hello-world.html#writing-and-running-a-rust-program" %}
Hello Worldï¼ï¼ï¼
{% endembed %}

## Create a new bin project

```bash
cargo new project_name # default create bin projcet
```

<figure><img src="../../.gitbook/assets/image.png" alt=""><figcaption><p>tree command see project</p></figcaption></figure>

å½“ä½ ä½¿ç”¨ `cargo new` åˆ›å»ºä¸€ä¸ªæ–°çš„ Rust é¡¹ç›®æ—¶ï¼ŒCargo ä¼šä¸ºä½ ç”Ÿæˆä¸€ä¸ªæ ‡å‡†çš„é¡¹ç›®ç»“æ„ã€‚å¯¹äºä¸€ä¸ªäºŒè¿›åˆ¶é¡¹ç›®ï¼ˆ`bin` é¡¹ç›®ï¼‰ï¼Œåˆ›å»ºåé¡¹ç›®ç›®å½•é€šå¸¸åŒ…å«ä»¥ä¸‹æ–‡ä»¶å’Œç›®å½•ï¼š

#### é¡¹ç›®ç»“æ„

```bash
test_project/
â”œâ”€â”€ Cargo.toml
â””â”€â”€ src/
    â””â”€â”€ main.rs
```

#### æ–‡ä»¶å’Œç›®å½•ä»‹ç»

1.  **`Cargo.toml`**

    `Cargo.toml` æ˜¯é¡¹ç›®çš„é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«äº†é¡¹ç›®çš„å…ƒæ•°æ®ã€ä¾èµ–é¡¹ã€æ„å»ºé…ç½®ç­‰å†…å®¹ã€‚ä»¥ä¸‹æ˜¯ `Cargo.toml` æ–‡ä»¶çš„å…¸å‹å†…å®¹ï¼š

    ```toml
    [package]
    name = "my_project"
    version = "0.1.0"
    edition = "2021"

    # ä¾èµ–é¡¹
    [dependencies]
    ```

    * **`[package]`**ï¼šå®šä¹‰åŒ…çš„å…ƒæ•°æ®ï¼ŒåŒ…æ‹¬åŒ…çš„åç§°ã€ç‰ˆæœ¬å·å’Œ Rust è¯­è¨€çš„ editionï¼ˆå¦‚ 2018 æˆ– 2021ï¼‰ã€‚
    * **`[dependencies]`**ï¼šåˆ—å‡ºé¡¹ç›®æ‰€éœ€çš„ä¾èµ–åº“ã€‚å¦‚æœä½ éœ€è¦ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“ï¼Œå¯ä»¥åœ¨è¿™é‡Œæ·»åŠ ï¼Œä¾‹å¦‚ `serde = "1.0"`ã€‚
2.  **`src/`**

    `src` ç›®å½•æ˜¯é¡¹ç›®çš„æºä»£ç ç›®å½•ã€‚å¯¹äºä¸€ä¸ªäºŒè¿›åˆ¶é¡¹ç›®ï¼ŒCargo é»˜è®¤ä¼šç”Ÿæˆä¸€ä¸ª `main.rs` æ–‡ä»¶ä½œä¸ºç¨‹åºçš„å…¥å£ã€‚
3.  **`src/main.rs`**

    `main.rs` æ˜¯é¡¹ç›®çš„ä¸»æ–‡ä»¶ï¼ŒåŒ…å«ç¨‹åºçš„å…¥å£å‡½æ•° `main()`ã€‚è¿™æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼š

    ```rust
    fn main() {
        println!("Hello, world!");
    }
    ```

    * **`fn main()`**ï¼šç¨‹åºçš„å…¥å£å‡½æ•°ï¼Œå½“ä½ è¿è¡Œ `cargo run` æ—¶ï¼Œ`main()` å‡½æ•°ä¼šè¢«è°ƒç”¨ã€‚`main.rs` ä¸­çš„ä»£ç å°±æ˜¯ç¨‹åºçš„æ ¸å¿ƒé€»è¾‘ã€‚

#### è¿è¡Œä¸æ„å»º

å½“ä½ åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„ `bin` é¡¹ç›®åï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æ¥è¿è¡Œå’Œæ„å»ºé¡¹ç›®ï¼š

* **`cargo run`**ï¼šç¼–è¯‘å¹¶è¿è¡Œé¡¹ç›®ï¼Œæ‰§è¡Œ `main.rs` ä¸­çš„ä»£ç ã€‚
* **`cargo build`**ï¼šç¼–è¯‘é¡¹ç›®ï¼Œç”ŸæˆäºŒè¿›åˆ¶æ–‡ä»¶ï¼ˆé»˜è®¤å­˜æ”¾åœ¨ `target/debug/` ç›®å½•ä¸­ï¼‰ã€‚
* **`cargo build --release`**ï¼šç¼–è¯‘å‘å¸ƒç‰ˆæœ¬ï¼Œè¿›è¡Œä¼˜åŒ–å¹¶ç”ŸæˆäºŒè¿›åˆ¶æ–‡ä»¶ï¼ˆé»˜è®¤å­˜æ”¾åœ¨ `target/release/` ç›®å½•ä¸­ï¼‰ã€‚

å½“ä½ ä½¿ç”¨ `cargo new --lib` åˆ›å»ºä¸€ä¸ªæ–°çš„ Rust åº“é¡¹ç›®æ—¶ï¼ŒCargo ä¼šç”Ÿæˆä¸€ä¸ªé€‚åˆç¼–å†™ Rust åº“çš„é¡¹ç›®ç»“æ„ã€‚ä¸äºŒè¿›åˆ¶é¡¹ç›®ï¼ˆ`bin`ï¼‰ä¸åŒï¼Œåº“é¡¹ç›®ï¼ˆ`lib`ï¼‰çš„æ ¸å¿ƒåœ¨äºç¼–å†™å¯ä»¥è¢«å…¶ä»–é¡¹ç›®æˆ–åº”ç”¨ç¨‹åºè°ƒç”¨å’Œå¤ç”¨çš„ä»£ç ã€‚

#### é¡¹ç›®ç»“æ„

```css
my_library/
â”œâ”€â”€ Cargo.toml
â””â”€â”€ src/
    â””â”€â”€ lib.rs
```

#### æ–‡ä»¶å’Œç›®å½•ä»‹ç»

1.  **`Cargo.toml`**

    `Cargo.toml` æ˜¯é¡¹ç›®çš„é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«åº“é¡¹ç›®çš„å…ƒæ•°æ®ã€ä¾èµ–é¡¹ã€æ„å»ºé…ç½®ç­‰å†…å®¹ã€‚ä»¥ä¸‹æ˜¯åº“é¡¹ç›®çš„ `Cargo.toml` æ–‡ä»¶çš„å…¸å‹å†…å®¹ï¼š

    ```toml
    [package]
    name = "my_library"
    version = "0.1.0"
    edition = "2021"

    # ä¾èµ–é¡¹
    [dependencies]
    ```

    * **`[package]`**ï¼šå®šä¹‰åº“çš„å…ƒæ•°æ®ï¼ŒåŒ…æ‹¬åº“çš„åç§°ã€ç‰ˆæœ¬å·å’Œ Rust è¯­è¨€çš„ editionã€‚
    * **`[dependencies]`**ï¼šåˆ—å‡ºé¡¹ç›®æ‰€éœ€çš„ä¾èµ–åº“ã€‚ä½ å¯ä»¥åœ¨è¿™é‡Œæ·»åŠ ç¬¬ä¸‰æ–¹åº“æˆ–å·¥å…·ï¼Œä¾‹å¦‚ `rand = "0.8"`ã€‚
2.  **`src/`**

    `src` ç›®å½•æ˜¯é¡¹ç›®çš„æºä»£ç ç›®å½•ã€‚å¯¹äºä¸€ä¸ªåº“é¡¹ç›®ï¼ŒCargo é»˜è®¤ä¼šç”Ÿæˆä¸€ä¸ª `lib.rs` æ–‡ä»¶ä½œä¸ºåº“çš„å…¥å£ã€‚
3.  **`src/lib.rs`**

    `lib.rs` æ˜¯åº“é¡¹ç›®çš„ä¸»æ–‡ä»¶ï¼Œå®šä¹‰äº†åº“çš„æ¨¡å—ã€å…¬å…± API ä»¥åŠå…¶ä»–é€»è¾‘ã€‚è¿™æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼š// å®šä¹‰åº“çš„å…¬å…± API

    ```rust
    pub fn hello() -> String {
        "Hello, library!".to_string()
    }
    ```

    * **`pub fn hello()`**ï¼šè¿™æ˜¯ä¸€ä¸ªå…¬å…±å‡½æ•°ï¼Œå¯ä»¥è¢«å…¶ä»–é¡¹ç›®è°ƒç”¨ã€‚`pub` å…³é”®å­—è¡¨ç¤ºè¿™ä¸ªå‡½æ•°æ˜¯å…¬å¼€çš„ï¼Œå¯ä»¥è¢«åº“çš„ç”¨æˆ·è®¿é—®ã€‚
    * åœ¨ `lib.rs` ä¸­ï¼Œä½ å¯ä»¥å®šä¹‰å¤šä¸ªæ¨¡å—ã€ç»“æ„ä½“ã€æšä¸¾ã€å‡½æ•°ç­‰æ¥å®ç°åº“çš„åŠŸèƒ½ã€‚

#### ä½¿ç”¨åº“é¡¹ç›®

åˆ›å»ºä¸€ä¸ªåº“é¡¹ç›®åï¼Œä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼ä½¿ç”¨å’Œæµ‹è¯•å®ƒï¼š

*   **åœ¨å…¶ä»–é¡¹ç›®ä¸­ä½¿ç”¨**ï¼šä½ å¯ä»¥åœ¨å…¶ä»– Rust é¡¹ç›®ä¸­é€šè¿‡åœ¨ `Cargo.toml` ä¸­æ·»åŠ ä¾èµ–é¡¹æ¥å¼•ç”¨è¿™ä¸ªåº“ã€‚ä¾‹å¦‚ï¼š

    ```toml
    [dependencies]
    my_library = { path = "../my_library" }
    ```
*   **æµ‹è¯•åº“åŠŸèƒ½**ï¼šé€šè¿‡åœ¨ `src/lib.rs` ä¸­æ·»åŠ æµ‹è¯•æ¨¡å—æ¥æµ‹è¯•åº“çš„åŠŸèƒ½ï¼š

    ```rust
    #[cfg(test)]
    mod tests {
        use super::*;

        #[test]
        fn test_hello() {
            assert_eq!(hello(), "Hello, library!");
        }
    }
    ```
* **ç¼–è¯‘åº“**ï¼šä½¿ç”¨ `cargo build` æˆ– `cargo build --release` ç¼–è¯‘åº“é¡¹ç›®ï¼Œç”Ÿæˆ `.rlib` æ–‡ä»¶ï¼Œè¿™äº›æ–‡ä»¶å¯ä»¥è¢«å…¶ä»– Rust é¡¹ç›®é“¾æ¥å’Œä½¿ç”¨ã€‚

